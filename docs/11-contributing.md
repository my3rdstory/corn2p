### 프로젝트 기여 가이드

이 문서는 p2phelper 프로젝트에 기여하려는 분들을 위한 기본 가이드입니다. 신규/기존 기여자 모두가 빠르게 합류하고 일관된 방식으로 협업할 수 있도록 작성되었습니다.

---

### 기본 원칙

- **투명성**: 이슈/PR에서 맥락과 의사결정을 기록합니다.
- **작은 단위 변경**: 리뷰와 롤백이 쉬운 작은 단위로 PR을 나눕니다.
- **재현 가능성**: 버그/이슈는 재현 절차와 기대/실제 결과를 명확히 적습니다.

---

### 이슈 등록 방법

1. 중복 확인: 기존 이슈를 먼저 검색합니다.
2. 템플릿
   - 제목: 문제의 핵심을 한 문장으로 요약
   - 내용: 배경, 재현 절차, 기대 결과, 실제 결과, 스크린샷/로그(가능 시)
   - 우선순위/영향 범위: 기능 중단, 경미한 버그 등

---

### 브랜치 전략

- 기본 브랜치: `develop` (기능 통합), `main` (배포)
- 기능: `feature/<짧은-설명>` 예) `feature/add-trade-filter`
- 버그 수정: `fix/<이슈-번호-또는-설명>` 예) `fix/123-telegram-timeout`
- 급한 장애: `hotfix/<설명>` → `main` 및 `develop`에 병합

---

### 커밋 규칙

- 한 커밋은 한 가지 의도를 담습니다. (기능/리팩터/버그수정 분리)
- 예시
  - "거래 생성 시 수수료 반올림 오류 수정"
  - "KB 환율 파서 오류 처리 추가"
  - "텔레그램 핸들러 공통 로깅 함수 도입"

---

### 코드 스타일/품질

- 타입스크립트 적극 사용, 필요 시 유연하게 any 허용 (프로젝트 규칙 준수)
- 테스트: Jest 사용. `npm test`, `npm run test:watch`, `npm run test:coverage`
- 커버리지 리포트: `coverage/lcov-report/index.html`
- 대규모 변경 전: 아키텍처 영향/성능 영향 간단히 정리 후 공유

---

### 보안/민감 정보

- 토큰/비밀키/개인정보를 코드/로그/PR에 절대 노출하지 않습니다.
- `.env`의 민감 값은 예시 형태로만 공유합니다.
- 암호화 키(`ENC_SECRET`) 등은 로컬에서만 관리하고, 샘플은 문서로 대체합니다.

---

### 리뷰 관점

- 기능: 올바르게 작동하는가? 예외 케이스는?
- 성능: 불필요한 연산/반복 호출은 없는가?
- 보안: 민감정보 노출/위협 취약점은 없는가?
- 구조: 읽기 쉽고 유지보수하기 쉬운가?
- 일관성: 팀 컨벤션을 따르는가?
- 테스트: 충분하며, 테스트하기 쉬운 구조인가?

---

### PR/리뷰 프로세스 요약

1. 기능 브랜치에서 작업 후 PR을 `develop` 대상으로 생성합니다.
2. 작은 변경 단위로 올리고, 설명/테스트 방법/체크리스트를 포함합니다.
3. 리뷰어 요청 → 피드백 반영 → 재승인 → 머지
4. 머지 후 배포 노트(필요 시) 업데이트

---

### 외부 라이브러리 타입 확인 지침

1. src 코드는 참고용으로만 활용 (직접 의존 금지)
1. 타입 추론 실패 시 실제 타입 정의 파일을 최우선으로 확인

---

### 문의/소통

- 명확한 제목과 TL;DR 요약으로 빠른 리뷰를 도와주세요.
- 논의가 필요한 건은 이슈를 열어 비동기 협업을 선호합니다.
